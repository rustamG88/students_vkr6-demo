# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ ngrok

## üìã –ß—Ç–æ —Ç–∞–∫–æ–µ ngrok?
ngrok - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∫ –≤–∞—à–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Telegram –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É Mini App, —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.

## üîß –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∫–∞—á–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://ngrok.com/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –°–∫–∞—á–∞–π—Ç–µ ngrok –¥–ª—è Windows
4. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ –ª—é–±—É—é –ø–∞–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `C:\ngrok\`)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Chocolatey (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```bash
choco install ngrok
```

## üîë –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://dashboard.ngrok.com/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Your Authtoken"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `2abc123def456ghi789jkl`)

## ‚öôÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
ngrok config add-authtoken –í–ê–®_–¢–û–ö–ï–ù_–ó–î–ï–°–¨
```

–ü—Ä–∏–º–µ—Ä:
```bash
ngrok config add-authtoken 2abc123def456ghi789jkl
```

## üöÄ –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 4.1 –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
start-all.bat
```
–ò–ª–∏:
```bash
node app.js
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000. –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
üöÄ Server running on port 3000
üì± Telegram Mini App available at: http://localhost:3000
```

### 4.2 –ó–∞–ø—É—Å–∫ ngrok (–≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏)
–û—Ç–∫—Ä–æ–π—Ç–µ **–ù–û–í–û–ï** –æ–∫–Ω–æ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
ngrok http 3000
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
ngrok                                                                                                                               
                                                                                                                                    
Session Status                online                                                                                                
Account                       your-email@example.com (Plan: Free)                                                                 
Version                       3.3.0                                                                                               
Region                        United States (us)                                                                                  
Latency                       45ms                                                                                                
Web Interface                 http://127.0.0.1:4040                                                                              
Forwarding                    https://abc123def456.ngrok-free.app -> http://localhost:3000                                       
                                                                                                                                    
Connections                   ttl     opn     rt1     rt5     p50     p90                                                         
                              0       0       0.00    0.00    0.00    0.00
```

**–í–ê–ñ–ù–û:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∏–∑ —Å—Ç—Ä–æ–∫–∏ "Forwarding" (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123def456.ngrok-free.app`)

## üìù –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

### 5.1 –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env`
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ:
```env
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
JWT_SECRET=test_secret_key

# –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å –í–ê–®–ò–ú ngrok URL
NGROK_URL=https://abc123def456.ngrok-free.app
BASE_URL=https://abc123def456.ngrok-free.app
TELEGRAM_WEBHOOK_URL=https://abc123def456.ngrok-free.app/api/telegram/webhook
```

### 5.2 –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `app.js`
–ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `app.js` —Å—Ç—Ä–æ–∫–∏ —Å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 20-30):
```javascript
// CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
app.use(cors({
  origin: [
    'http://localhost:3000',
    'http://localhost:5173',
    'https://your-domain.com',
    'https://abc123def456.ngrok-free.app'  // ‚Üê –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –°–¢–†–û–ö–£
  ],
  credentials: true
}));
```

### 5.3 –û–±–Ω–æ–≤–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `frontend/src/config/api.js` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ:
```javascript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—ã–π URL API
const getBaseURL = () => {
  // –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º ngrok URL
  if (window.location.hostname !== 'localhost') {
    return 'https://abc123def456.ngrok-free.app/api';  // ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® URL
  }
  
  // –õ–æ–∫–∞–ª—å–Ω–æ
  return 'http://localhost:3000/api';
};

export const API_BASE_URL = getBaseURL();
```

## üîÑ –®–∞–≥ 6: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

### 6.1 –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ –æ–∫–Ω–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º

### 6.2 –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
```bash
cd frontend
npm run build
cd ..
```

### 6.3 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∑–∞–Ω–æ–≤–æ
```bash
node app.js
```

## ü§ñ –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### 7.1 –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ @BotFather
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞

### 7.2 –û–±–Ω–æ–≤–∏—Ç–µ URL Mini App
1. –í—ã–±–µ—Ä–∏—Ç–µ "Bot Settings" ‚Üí "Menu Button"
2. –ò–ª–∏ "Web App" ‚Üí "Edit Web App URL"
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à ngrok URL: `https://abc123def456.ngrok-free.app`

### 7.3 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ BotFather
```
/setmenubutton
@–≤–∞—à_–±–æ—Ç_username
–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
https://abc123def456.ngrok-free.app
```

## ‚úÖ –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Menu" –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
4. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–∞—à–µ Mini App —á–µ—Ä–µ–∑ ngrok

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "This site can't be reached"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`node app.js`)
- ngrok –∑–∞–ø—É—â–µ–Ω (`ngrok http 3000`)
- URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –ü—Ä–æ–±–ª–µ–º–∞: "ngrok command not found"
**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ngrok —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –î–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å –∫ ngrok –≤ PATH
- –ò–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –ø–∞–ø–∫–∏ —Å ngrok: `C:\ngrok\ngrok.exe http 3000`

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ ngrok URL –≤ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `app.js`

### –ü—Ä–æ–±–ª–µ–º–∞: "Visit Site" –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ ngrok
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏. –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏—Ç–µ "Visit Site"

## üì± –®–∞–≥ 9: –ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–í–ê–ñ–ù–û:** –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ ngrok URL –º–µ–Ω—è–µ—Ç—Å—è!

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `node app.js`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok: `ngrok http 3000`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π URL –∏–∑ ngrok
4. –û–±–Ω–æ–≤–∏—Ç–µ:
   - `.env` —Ñ–∞–π–ª
   - `app.js` (CORS)
   - `frontend/src/config/api.js`
   - URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram –±–æ—Ç–∞
5. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥: `cd frontend && npm run build && cd ..`
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
node app.js

# –ó–∞–ø—É—Å–∫ ngrok
ngrok http 3000

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
cd frontend && npm run build && cd ..

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ ngrok
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:4040
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] ngrok —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
- [ ] ngrok –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç URL
- [ ] URL –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env`
- [ ] URL –¥–æ–±–∞–≤–ª–µ–Ω –≤ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `app.js`
- [ ] URL –¥–æ–±–∞–≤–ª–µ–Ω –≤ `frontend/src/config/api.js`
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
- [ ] URL –æ–±–Ω–æ–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram –±–æ—Ç–∞
- [ ] –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à Telegram Mini App –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç! 